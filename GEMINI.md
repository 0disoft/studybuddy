# 프로젝트 가이드라인

* 이 문서는 LLM이 프로젝트의 맥락을 정확히 이해하고, 더 효율적이며 프로젝트에 특화된 도움을 제공하도록 돕기 위해 작성되었습니다.

---

## 프로젝트 개요 및 목표

* 프로젝트 이름: studybuddy
* 목표: 스터디카페 점주에게는 위임 가능한 지능형 관리 도구를, 회원에게는 새로운 학습 경험을 제공하며, 기존 키오스크 업체와는 API로 연동하는 '지능형 백엔드 플랫폼'을 구축합니다.
* 핵심 가치: 'API 우선(API-First) 아키텍처', '지능형 자동화', '위임 가능한 관리 시스템(RBAC)', '즐거운 학습 경험(Gamification)'
* 디자인 톤 앤 매너: '모던하고 깔끔한', '직관적인', '데이터 시각화가 강조된'
* 대상 사용자:
  * 1차: 소프트웨어 경쟁력을 강화하고 싶은 키오스크 제조업체 및 유통사
  * 2차: 운영 효율과 직원에게 업무 위임을 원하는 스터디카페 점주
  * 3차: 새로운 학습 동기 부여와 커뮤니티 활동에 관심 있는 스터디카페 이용 회원
* 주요 경쟁 서비스: 기존 스터디카페 관리 솔루션의 백엔드 시스템
  * 차별화 포인트: LLM 기반 리포팅, 게이미피케이션, 내부 PC 허브 기능, 세분화된 직원 권한 관리(RBAC), 그리고 어떤 하드웨어와도 연동 가능한 개방형 API 제공
* 비즈니스 모델: 키오스크 파트너사 대상 라이선스 비용 또는 점주 대상 등급별 월정액 구독료(Tiered Subscription)
* 향후 확장 계획 (Roadmap):
  * 1단계 (MVP): 키오스크 연동을 위한 핵심 API 및 점주용 관리자 웹 완성, 첫 키오스크 파트너사 확보
  * 2단계: 파트너사 연동 지원 및 회원용 모바일 앱(포인트, AI챗봇 등) 개발
  * 3단계: 공유 오피스 등 유사 공간으로 서비스 확장. 축적된 데이터를 활용한 고도의 수요 예측 및 가격 최적화 모델 도입
  * 기술적 전략: 서버리스 아키텍처 기반의 유연한 스케일아웃. 데이터베이스는 Supabase의 RLS(Row Level Security)를 적극 활용하여 역할 기반 접근 제어를 구현.
* 프로젝트 깃헙 레포지토리: `https://github.com/0disoft/studybuddy`

---

## 기술 스택 및 설정 전략

* 개발 유형: 웹 애플리케이션, 모바일 애플리케이션 (웹 기술 기반), 데스크톱 애플리케이션 (웹 뷰어)
* 프론트엔드/풀스택 프레임워크: SvelteKit
  * 핵심 기능 라이브러리/서비스:
    * 폼 관리: `sveltekit-superforms`
    * 데이터 페칭/상태 관리: SvelteKit 내장 `load` 함수 및 `stores`
    * 차트/데이터 시각화: `Chart.js`
* 스타일링 툴: `shadcn-svelte` + `Tailwind CSS`
* 백엔드: 프론트엔드에 내장된 것 사용 (SvelteKit API Routes)
  * 핵심 기능 라이브러리/서비스:
    * LLM 연동: OpenAI 또는 Google Gemini API 클라이언트 라이브러리
    * 인증/파일 업로드/DB 접근 제어: Supabase 클라이언트 라이브러리 (Auth 및 RLS 활용)
* 런타임 환경 및 패키지 매니저: Bun
* 데이터베이스: Supabase (PostgreSQL)
  * ORM/데이터베이스 클라이언트: Prisma
* 배포 전략 및 플랫폼: Vercel
  * CI/CD 파이프라인: Vercel 내장 CI/CD
* 지역화 (l10n) 전략: 수동 준비 (키 기반, MVP는 한국어 우선)
  * 관련 라이브러리/서비스: `paraglide-js`
* API 클라이언트 (테스트 및 문서화): Bruno
* 데이터 유효성 검사: Zod

---

## 개발 환경

* OS: 윈도우 11
* IDE: VS Code
* 터미널: Git Bash
* 쉘 프롬프트 커스터마이저: Starship

---

## 구현해야 할 페이지와 기능

### 1. MVP (1단계): 첫 키오스크 파트너 확보 목표

* **점주용 관리자 웹 (핵심 제품)**
  * 대시보드: AI 리포트 브리핑(v1) 기능 포함
  * 회원 관리: 기본 조회 및 관리
  * 운영 관리: 이용권, 포인트/쿠폰 규칙 설정
  * 직원(총무) 관리: 역할(Role) 생성 및 세분화된 권한(Permission) 설정 기능 (RBAC)
  * AI 챗봇 지식 베이스 관리: 구조화된 정보(가격, 시간 등) 및 FAQ 입력 기능
* **키오스크 연동용 API**
  * 좌석 상태 조회, 결제 정보 처리, 회원 조회/등록 등 키오스크 운영에 필요한 핵심 API 엔드포인트
  * 파트너사를 위한 명확한 API 문서 (Swagger/OpenAPI)

### 2. 회원용 기능 (2단계): 파트너 연동 후 개발

* **회원용 모바일 앱/웹**
  * 포인트 적립 및 쿠폰 교환
  * AI 챗봇 (점주가 입력한 지식 베이스 기반의 RAG 적용)
  * 공지사항 확인 및 스태프 지원 기능
* **PC 정보 포털**
  * 스태프 모집 공고 및 공지사항 조회

### 3. 고도화 기능 (3단계 이후)

* 점주용: 마케팅 자동화, 심층 데이터 분석 기능
* 회원용: 커뮤니티(스터디 그룹), 랭킹/배지 등 게이미피케이션 요소 확장

---

## 코딩 규칙 및 스타일

* 변수/함수명: 명확하고 의미를 쉽게 유추할 수 있는 이름을 사용합니다. (예: `getData` 대신 `fetchUserProfileData`)
* 코드 라인 길이: 한 줄의 최대 길이는 80자 (띄어쓰기 포함)를 지킵니다. (예외: 긴 URL, 코드 블록, 테이블, 제목)
* 함수 길이: 함수의 최대 길이는 50라인 (주석 및 줄바꿈 포함)을 지킵니다.
* 들여쓰기: 특별한 경우가 아니라면 2칸 공백을 사용합니다.
* 커밋 메시지: Gitmoji 형식을 사용한 영어 코멘트를 작성합니다.
* Single Source of Truth: 서비스 이름, API 엔드포인트, 주요 설정 값 등은 코드 곳곳에 하드코딩하지 않습니다. 모든 설정은 별도의 설정 파일이나 상수 모듈에 모아서, 딱 한 군데만 수정하면 전체에 적용되도록 만듭니다.
* 모듈성: 코드를 작고 응집도 높은 모듈로 분리하여 재사용성과 유지보수성을 높입니다.
* 가독성: 다른 개발자가 코드를 쉽게 이해할 수 있도록 작성합니다.
* 성능: 특히 고빈도 호출이 예상되는 API나 데이터 처리 로직에서는 성능을 최우선으로 고려합니다.
* 보안: 사용자 데이터 보호, 인증/인가, 입력 유효성 검사 등 보안을 항상 염두에 둡니다. (프로젝트 특성에 따른 추가 보안 고려사항 명시 가능: 예: XSS/CSRF 방지, SQL Injection 방지, 비밀번호 해싱)
* 데이터 정확성: 제공되는 데이터(특히 계산 결과)는 최신 법규와 공식 데이터를 기반으로 최대한의 정확성을 보장해야 합니다. 부동 소수점 오류 방지를 위한 정밀한 숫자 연산 라이브러리 사용을 권장합니다.
* 에러 처리: 모든 잠재적인 에러 상황에 대해 견고하고 명확한 에러 처리 로직을 구현합니다. (예: 서버 측 폼 액션에서 `fail` 함수를 사용하여 개발자에게 구체적인 오류 메시지 전달)
* 접근성 (A11y): 웹 애플리케이션 개발 시 웹 접근성 표준을 준수하여 모든 사용자가 쉽게 접근하고 이용할 수 있도록 합니다. (처음부터 강력한 접근성 보장)
* 주석 작성 규칙: 주석은 '왜' 이 코드가 존재하는지, 코드를 변경했다면 '왜' 변경했는지, 특정 비즈니스 논리나 기술적 절충안 등 코드만으로 설명하기 어려운 배경 정보를 제공하는데 사용합니다.
* 마크다운 작성 규칙: 다음은 자주 발생하는 마크다운 오류이므로 항상 유의하여 작성합니다.
  * `MD030/list-marker-space`: 리스트 마커 다음에는 정확히 한 칸의 공백을 사용합니다.
  * `MD022/blanks-around-headings`: 제목(Heading)의 위와 아래에는 항상 한 줄씩 비워둡니다.
  * `MD047/single-trailing-newline`: 파일의 마지막은 항상 하나의 개행 문자로 끝나야 합니다.
  * `MD024/no-duplicate-heading`: 한 문서 내에서 동일한 내용의 제목을 중복으로 사용하지 않습니다.
  * `MD007/ul-indent`: 중첩되지 않은 리스트는 2칸 들여쓰기를 사용합니다.

---

## AI 지식 베이스 및 문서화

LLM의 학습 데이터 한계(Knowledge Cutoff)를 극복하고, 프로젝트의 기술적 맥락과 최신 정보를 정확하게 파악하기 위해 이 중앙화된 지식 베이스를 관리합니다. 코드를 분석하거나 생성할 때, 항상 이 내부 지식 베이스의 문서를 가장 먼저 확인하십시오.

* 위치: LLM과 관련된 모든 문서는 `/.gemini/` 폴더 아래에 중앙화하여 관리합니다.

### 프레임워크 최신 정보 (`/.gemini/.changelogs/` 및 `/.gemini/.context7/`)

* 목적: LLM의 지식 격차를 해소하고, 최신 프레임워크 정보를 효과적으로 활용하기 위해 두 가지 유형의 문서를 관리합니다.
  * `/.gemini/.changelogs/`: 주요 프레임워크의 분기별(예: 25년 상반기, 하반기) 최신 업데이트 중, 반드시 알아야 할 핵심 변경 사항이나 주요 기능 추가 내용을 요약하여 저장합니다.
  * `/.gemini/.context7/`: `Context7` MCP를 통해 방대한 공식 문서를 검색하기 전, 로컬에서 자주 사용하는 기능의 일반적인 사용법이나 코드 스니펫을 빠르게 확인하기 위한 용도로 사용됩니다.
* LLM 활용 가이드:
  * 프레임워크의 최신 버전과 관련된 작업을 수행할 때는 먼저 `/.gemini/.changelogs/` 폴더를 확인하여 중요한 변경 사항(breaking changes 등)을 코드에 반영하십시오.
  * 특정 기능의 기본적인 사용법이나 예제가 필요할 때는 `/.gemini/.context7/` 폴더의 문서를 우선적으로 참조하여 빠르게 정보를 얻고, 더 상세한 내용이 필요할 경우에 `Context7` MCP를 활용하십시오.

---

## LLM과의 협업

* LLM이 문제 해결을 완료하고 사용자로부터 긍정적인 응답을 받으면, `.gemini/.commitmsg.txt` 파일에 Gitmoji 형식의 영어 커밋 메시지를 작성합니다.
* LLM이 작업을 완료하고 사용자로부터 긍정적인 응답을 받으면, `.gemini/tasks/` 폴더에 상세 작업 기록을 Markdown 파일로 작성합니다. 상세 형식은 `.gemini/tasks/task_record_example.md` 파일을 참조하십시오.
* LLM의 답변(응답)은 한국어로 합니다.
* 폴더명과 파일명은 영어로 작성해야 합니다.
* 변수명, 클래스명 등은 영어로 작성해야 합니다.
* 코드 주석은 한국어로 작성합니다.
* 오류 로그는 한국어로 작성합니다.
* 홈페이지에 표시되는 메시지나 서비스를 이용하게 될 사용자와의 상호작용 메시지는 페이지의 기본 언어 설정 및 다국어 지원 여부에 따라 적절한 언어(예: 영어 또는 한국어)로 작성합니다.
